{% extends '__base__.html' %}

{% block title %}用户管理{% endblock %}

{% block beforehead %} {% endblock %}

{% block js %}

		<script>

		function initVM(data) {
			$('#vm').show();
			var vm = new Vue({
				el: '#vm',
				data: {
					users: data.users,
				}
			});
		}

		$(function() {
			getJSON('/api/users',
			function (err, results) {
				if (err) {
					return fatal(err);
				}
				$('#loading').hide();
				initVM(results);
			});
		});

		</script>

{% endblock %}		

{% block content %}
	
	<!-- 用户设备选择板块 -->
	    <div class="uk-width-1-1 uk-margin-bottom">
			<div class="uk-panel uk-panel-box">
				<ul class="uk-breadcrumb">
					<li><a href="/manage/devices">设备</a></li>
					<li class="uk-active"><span>用户</span></li>
				</ul>
			</div>
		</div>
	
	<!-- 用户管理板块 -->

		<div id="loading" class="uk-width-1-1 uk-text-center">
			<span><i class="uk-icon-spinner uk-icon-medium uk-icon-spin"></i> 正在加载...</span>
		</div>

		<div id="vm" class="uk-width-1-1">
			<table class="uk-table uk-table-hover">
				<thead>
					<tr>
						<th class="uk-width-4-10">ID</th>
						<th class="uk-width-4-10">昵称</th>
						<th class="uk-width-2-10">权限</th>
					</tr>
				</thead>
				<tbody>
					<tr v-repeat="user: users" >
						<td>
							<span v-text="user.id"></span>
						</td>
						<td>
							<span v-text="user.name"></span>
							<span v-if="user.admin" style="color:#d05"><i class="uk-icon-key"></i> 管理员</span>
						</td>
						<td>
							<span v-text="user.admin"></span>
						</td>
					</tr>
				</tbody>
			</table>
		</div>		
	
{% endblock %}